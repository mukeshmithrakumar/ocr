let showFilters=!1;function toggleFilters(){showFilters=!showFilters,document.getElementById("FiltersBox").style.display=showFilters?"grid":"none"}document.getElementById("FiltersBox").style.display=showFilters?"grid":"none";var _paper_name=sessionStorage.getItem("_search_text");function basicSearch(query){var clean_query;getResults(sluggify(query))}function sluggify(raw_name){var clean_name;return raw_name.match(/\w+/g).join("+")}function advancedSearch(){$(".post").hide();var query=$(".advancedInput").val(),start=0,sortBy=$("#sortBy :selected").text(),sortOrder=$("#sortOrder :selected").text(),max_results=$("#maxResults").val(),clean_query;getResults(sluggify(query),0,max_results,sortBy,sortOrder)}function getResults(query,start=0,max_results=1,sortBy="relevance",sortOrder="descending"){var fullUrl=getUrl(query,start,max_results,sortBy,sortOrder);$.ajax({url:fullUrl,type:"GET",dataType:"xml",success:function(xml){loadResults(xml,max_results)},error:function(status){console.log("Request error "+status+"for url: "+fullUrl)}})}function getUrl(query,start,max_results,sortBy,sortOrder){var baseUrl="http://export.arxiv.org/api/query?search_query=all:";return query&&(baseUrl+=query),start&&(baseUrl+="&start="+start),max_results&&(baseUrl+="&max_results="+max_results),sortBy&&(baseUrl+="&sortBy="+sortBy),sortOrder&&(baseUrl+="&sortOrder="+sortOrder),baseUrl}function loadResults(xml){$(xml).find("entry").each((function(){var $paper=$(this),title=$paper.find("title").text(),authors=[];$paper.find("author").each((function(){authors.push($(this).find("name").text().trimEnd())}));var date=$paper.find("published").text().split("T")[0],summary=$paper.find("summary").text(),url=$paper.find("link").attr("href");createPost(title,authors,date,summary,url)}))}function createPost(title,authors,date,summary,url){var str_title="'"+title+"'",str_authors="'"+authors+"'",str_date="'"+date+"'",str_url="'"+url+"'";const post=document.createElement("div");post.classList.add("post"),post.innerHTML='<div class="try-it"><img src="../static/images/logo_red.svg" style="width:50px;height:50px;"><button class="btn summarize-button" onclick="summarizerAPICall('+str_title+", "+str_authors+", "+str_date+", "+str_url+')">Summarize</button></div><div class="post-info"><h2 class="post-title">'+title+'</h2><p class="post-author">by '+authors+'</p><small class="post-date">'+date+'</small><p class="post-abstract">'+summary+"</p></div>",container.appendChild(post)}function summarizerAPICall(title,authors,date,url){$("#loader").css("display","block");var obj={title:title,authors:authors,date:date,url:url};$.ajax({type:"POST",url:"https://f8k50m50oe.execute-api.us-east-2.amazonaws.com/prod/extract",dataType:"json",data:JSON.stringify(obj),contentType:"application/json",success:function(res){console.log(res)},error:function(status){console.log("Request error "+status+"for url: "+url)}}),$.post("/summaryMeta",obj).done((function(data){var summary_data=data;localStorage.setItem("summary_data",JSON.stringify(summary_data)),location.href="./summary.html"}))}sessionStorage.removeItem("_search_text"),null!==_paper_name&&basicSearch(_paper_name);
